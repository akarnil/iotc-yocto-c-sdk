From 982095bca4f90688c3387f6aae602ccddc85b3e2 Mon Sep 17 00:00:00 2001
From: "P.Young" <pyoung@witekio.com>
Date: Tue, 18 Apr 2023 09:28:07 +0100
Subject: [PATCH] changed preprocessors to allow for compiler argument
 over-ride

---
 samples/basic-sample/config/app_config.h | 21 ++++++++++++++++++---
 1 file changed, 18 insertions(+), 3 deletions(-)

diff --git a/samples/basic-sample/config/app_config.h b/samples/basic-sample/config/app_config.h
index b70c45f..fc3bdd5 100644
--- a/samples/basic-sample/config/app_config.h
+++ b/samples/basic-sample/config/app_config.h
@@ -7,23 +7,38 @@
 
 #include "iotconnect.h"
 
-#define IOTCONNECT_CPID "your-cpid"
-#define IOTCONNECT_ENV  "your-enviroment"
+#ifndef IOTCONNECT_CPID
+#error "IOTCONNECT_CPID not defined, please define in compiler args/enviroment variables or similar."
+#endif
+
+#ifndef IOTCONNECT_ENV
+#error "IOTCONNECT_ENV not defined, please define in compiler args/enviroment variables or similar."
+#endif
 
 // Device Unique ID
 // If using TPM, and this value is a blank string, Registration ID will be used from output of tpm_device_provision. Otherwise, the provide Device Uinque ID will be used.
-#define IOTCONNECT_DUID "your-device-unique-id"
+#ifndef IOTCONNECT_DUID
+#error "IOTCONNECT_DUID not defined, please define in compiler args/enviroment variables or similar."
+#endif
 
 // from iotconnect.h IotConnectAuthType
+#ifndef IOTCONNECT_AUTH_TYPE
 #define IOTCONNECT_AUTH_TYPE IOTC_AT_SYMMETRIC_KEY
+#endif
 
 // if using Symmetric Key based authentication, provide the primary or secondary key here:
+#ifndef IOTCONNECT_SYMMETRIC_KEY
 #define IOTCONNECT_SYMMETRIC_KEY ""
+#endif
 
 // If using TPM, provide the Scope ID here:
+#ifndef IOTCONNECT_SCOPE_ID
 #define IOTCONNECT_SCOPE_ID ""// AKA ID Scope.
+#endif
 
+#ifndef IOTCONNECT_CERT_PATH
 #define IOTCONNECT_CERT_PATH "../certs"
+#endif
 
 // This is the CA Certificate used to validate the IoTHub TLS Connection and it is required for all authentication types.
 // Alternatively, you can point this file to /etc/ssl/certs/Baltimore_CyberTrust_Root.pem on some Linux systems
-- 
2.25.1

